(()=>{"use strict";var e={470:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(933),a=n.n(r),s=n(476),i=n.n(s)()(a());i.push([e.id,'/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */\n\n/* Document\n   ========================================================================== */\n\n/**\n * 1. Correct the line height in all browsers.\n * 2. Prevent adjustments of font size after orientation changes in iOS.\n */\n\nhtml {\n  line-height: 1.15; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n}\n\n/* Sections\n   ========================================================================== */\n\n/**\n * Remove the margin in all browsers.\n */\n\nbody {\n  margin: 0;\n}\n\n/**\n * Render the `main` element consistently in IE.\n */\n\nmain {\n  display: block;\n}\n\n/**\n * Correct the font size and margin on `h1` elements within `section` and\n * `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n/* Grouping content\n   ========================================================================== */\n\n/**\n * 1. Add the correct box sizing in Firefox.\n * 2. Show the overflow in Edge and IE.\n */\n\nhr {\n  box-sizing: content-box; /* 1 */\n  height: 0; /* 1 */\n  overflow: visible; /* 2 */\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\npre {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/* Text-level semantics\n   ========================================================================== */\n\n/**\n * Remove the gray background on active links in IE 10.\n */\n\na {\n  background-color: transparent;\n}\n\n/**\n * 1. Remove the bottom border in Chrome 57-\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\n */\n\nabbr[title] {\n  border-bottom: none; /* 1 */\n  text-decoration: underline; /* 2 */\n  text-decoration: underline dotted; /* 2 */\n}\n\n/**\n * Add the correct font weight in Chrome, Edge, and Safari.\n */\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\n * Add the correct font size in all browsers.\n */\n\nsmall {\n  font-size: 80%;\n}\n\n/**\n * Prevent `sub` and `sup` elements from affecting the line height in\n * all browsers.\n */\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/* Embedded content\n   ========================================================================== */\n\n/**\n * Remove the border on images inside links in IE 10.\n */\n\nimg {\n  border-style: none;\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change the font styles in all browsers.\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\n * Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\n[type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Correct the padding in Firefox.\n */\n\nfieldset {\n  padding: 0.35em 0.75em 0.625em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box; /* 1 */\n  color: inherit; /* 2 */\n  display: table; /* 1 */\n  max-width: 100%; /* 1 */\n  padding: 0; /* 3 */\n  white-space: normal; /* 1 */\n}\n\n/**\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\n * Remove the default vertical scrollbar in IE 10+.\n */\n\ntextarea {\n  overflow: auto;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10.\n * 2. Remove the padding in IE 10.\n */\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type="search"] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding in Chrome and Safari on macOS.\n */\n\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/* Interactive\n   ========================================================================== */\n\n/*\n * Add the correct display in Edge, IE 10+, and Firefox.\n */\n\ndetails {\n  display: block;\n}\n\n/*\n * Add the correct display in all browsers.\n */\n\nsummary {\n  display: list-item;\n}\n\n/* Misc\n   ========================================================================== */\n\n/**\n * Add the correct display in IE 10+.\n */\n\ntemplate {\n  display: none;\n}\n\n/**\n * Add the correct display in IE 10.\n */\n\n[hidden] {\n  display: none;\n}\n',""]);const o=i},833:(e,t,n)=>{n.d(t,{Z:()=>b});var r=n(933),a=n.n(r),s=n(476),i=n.n(s),o=n(470),d=n(678),c=n.n(d),l=new URL(n(244),n.b),h=new URL(n(186),n.b),u=i()(a());u.i(o.Z);var p=c()(l),g=c()(h);u.push([e.id,"html{font-size:10px}.body{font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;font-size:1.6rem;min-height:100vh;padding:7px 3px}.garage-btn,.winners-btn{color:#b2b2b2;background-color:#f3f4f6;border:none;padding:10px 20px;border-radius:10px 0 0 10px;cursor:pointer}.garage-btn:disabled,.winners-btn:disabled{color:#fff;background-color:#527ae2;cursor:not-allowed}.garage-btn{border-radius:10px 0 0 10px}.winners-btn{border-radius:0px 10px 10px 0px}.show{display:block}.hide{display:none}.create-car,.update-car{display:flex;gap:5px;margin-top:10px}.new-car-name,.edit-car-name{padding:0.4rem 1rem;font-size:1.5rem;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:0.5rem;transition:0.3s}.new-car-name:disabled,.edit-car-name:disabled{background-color:#f6f6f6;cursor:not-allowed}.new-car-name:focus,.edit-car-name:focus{outline:none;box-shadow:0 0 0 0.2rem #007bff40}.new-car-color,.edit-car-color{background-color:#fff;border:1px solid #ced4da;border-radius:0.5rem;height:32px;cursor:pointer}.new-car-color:disabled,.edit-car-color:disabled{background-color:#f6f6f6;cursor:not-allowed}.create-car-btn,.update-car-btn,.race,.reset,.generate{color:#fff;background-color:#0069d9;border:1px solid #0062cc;border-radius:7px;padding:5px 10px;cursor:pointer}.create-car-btn:disabled,.update-car-btn:disabled,.race:disabled,.reset:disabled,.generate:disabled{background-color:#6c757d;border-color:#6c757d;cursor:not-allowed}.controls{margin-top:10px}.car{width:100px;height:30px;mask:url("+p+") no-repeat;-webkit-mask:url("+p+") no-repeat;mask-size:contain;-webkit-mask-size:contain}.car__select,.car__remove{color:#fff;border:1px solid #117a8b;background-color:#138496;border-radius:7px;padding:4px 12px;cursor:pointer}.car__start,.car__stop{color:#fff;background-color:#218838;border:1px solid #1e7e34;border-radius:7px;padding:4px 10px;cursor:pointer}.car__start:disabled,.car__stop:disabled{background-color:#6c757d;border-color:#6c757d;cursor:not-allowed}.car__title{font-weight:600;color:#1a1a1a}.car__remove{background-color:#c82333;border-color:#bd2130}.car.winner{width:50px;height:15px}.cars__item{margin-top:20px}.cars__row{display:flex;align-items:center;gap:5px}.cars__track{border-bottom:3px dashed #000;margin-top:10px}.car__path,.td__car{flex:1 0 auto;filter:drop-shadow(0px 0px 3px #000);-webkit-filter:drop-shadow(0px 0px 3px #000);position:relative}.flag{width:100px;height:50px;background:url("+g+") no-repeat;background-size:contain;position:absolute;right:50px;bottom:0}.win-message{position:fixed;z-index:100;left:0;right:0;top:0;bottom:0;margin:auto;width:500px;height:50px;font-size:40px;text-align:center;color:#761141;text-shadow:0 0 10px #fff, 0 0 20px #fff, 0 0 30px #e60073, 0 0 40px #e60073, 0 0 50px #e60073, 0 0 60px #e60073, 0 0 70px #e60073}.th-best-time,.th-wins{cursor:pointer}.pagination,.pagination-winners{margin-top:20px}.page-prev-btn,.page-next-btn{color:#fff;background-color:#007bff;border:1px solid #007bff;border-radius:7px;padding:4px 10px;cursor:pointer}.page-prev-btn:disabled,.page-next-btn:disabled{background-color:#6c757d;border-color:#6c757d;cursor:not-allowed}.winners-table{border:1px solid #dee2e6;border-collapse:collapse;margin-top:10px}.winners-table thead{color:#fff;background-color:#212529}.winners-table th,.winners-table td{border:1px solid #dee2e6;padding:0.75rem;vertical-align:top}\n",""]);const b=u},476:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,s){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var o=0;o<this.length;o++){var d=this[o][0];null!=d&&(i[d]=!0)}for(var c=0;c<e.length;c++){var l=[].concat(e[c]);r&&i[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),t.push(l))}},t}},678:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},933:e=>{e.exports=function(e){return e[1]}},153:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(892),a=n.n(r),s=n(760),i=n.n(s),o=n(311),d=n.n(o),c=n(192),l=n.n(c),h=n(60),u=n.n(h),p=n(865),g=n.n(p),b=n(833),m={};m.styleTagTransform=g(),m.setAttributes=l(),m.insert=d().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=u(),a()(b.Z,m);const f=b.Z&&b.Z.locals?b.Z.locals:void 0},892:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},i=[],o=0;o<e.length;o++){var d=e[o],c=r.base?d[0]+r.base:d[0],l=s[c]||0,h="".concat(c," ").concat(l);s[c]=l+1;var u=n(h),p={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var g=a(p,r);r.byIndex=o,t.splice(o,0,{identifier:h,updater:g,references:1})}i.push(h)}return i}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var s=r(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<s.length;i++){var o=n(s[i]);t[o].references--}for(var d=r(e,a),c=0;c<s.length;c++){var l=n(s[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}s=d}}},311:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},60:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},192:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},760:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},865:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},477:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(2)),s=r(n(421)),i=r(n(718));t.default=class{constructor(){this.Model=new a.default,this.View=new i.default,this.Presenter=new s.default(this.Model,this.View)}start(){this.Presenter.init()}}},160:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HOST=void 0;const n="https://rw-async-race-api.adaptable.app/";t.HOST=n,t.default={HOST:n}},2:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(645)),s=r(n(239)),i=r(n(173)),o=["Lexus","Fiat","Audi","Ford","Skoda","BMW","Mazda","Honda","Mercedes","Hyundai","Tesla","Mitsubishi","Toyota","Nissan","Volkswagen","Opel","Porsche","Range Rover","Lamborghini"],d=["Model 3","Model S","Model X","Model Y","Corona","Sienna","LS","RC","Toro","Cronos","Q8","S8","X7","Z8","Sentia","Xedos 6","Titan","Zafira","Meriva","Tayron","Routan","Phaeton"];t.default=class{constructor(){this.listeners={},this.state={carsCount:0,garagePage:0,carsPerPage:7,winnersCount:0,winnersPage:0,winnersPerPage:10,selectedCar:0,sort:"time",sortOrder:"ASC"},this.brand=o,this.model=d,this.garage=new s.default,this.engine=new a.default,this.winners=new i.default}subscribe(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}unsubscribe(e,t){this.listeners[e]=this.listeners[e].filter((e=>e!==t))}broadcast(e,t){this.listeners[e]&&this.listeners[e].forEach((e=>e(t)))}getCarsByPage(e){return this.garage.getCars(e).then((e=>{const t=Number(e.headers.get("x-total-count"));return this.setCarsCount(t),e.json()}))}setGaragePage(e=1){e<1||0!==this.state.garagePage&&e>this.getGaragePages()||(this.state.garagePage=e,this.broadcast("updateGaragePage",this.state.garagePage),this.getCarsByPage(e).then((e=>this.broadcast("loadGaragePage",e))).then((()=>this.broadcast("updateGaragePagination",this.getGaragePagination()))))}getCarById(e){return this.garage.getCar(e).then((e=>e.json()))}createCar(e,t){this.garage.createCar(e,t).then((e=>e.json())).then((e=>{this.setCarsCount(this.state.carsCount+1),this.getGaragePages()===this.state.garagePage?this.broadcast("createCar",e):this.broadcast("updateGaragePagination",this.getGaragePagination())}))}getGaragePagination(){const e={prev:!0,next:!0};return 1!==this.state.garagePage&&(e.prev=!1),this.state.garagePage<this.getGaragePages()&&(e.next=!1),e}updateCar(e,t,n){this.garage.updateCar(e,t,n).then((e=>e.json())).then((()=>this.broadcast("updateCar",{id:e,name:t,color:n})))}deleteCar(e){this.garage.deleteCar(e).then((e=>e.json())).then((()=>{const t=this.getGaragePages();this.broadcast("removeCar",e),this.setCarsCount(this.state.carsCount-1);const n=this.getGaragePages();if(t>this.state.garagePage){const e=this.state.garagePage*this.state.carsPerPage;this.garage.getCars(e,1).then((e=>{const t=Number(e.headers.get("x-total-count"));return this.setCarsCount(t),e.json()})).then((e=>this.broadcast("createCar",e[0])))}n<this.state.garagePage&&this.setGaragePage(n),this.broadcast("updateGaragePagination",this.getGaragePagination())}))}getGaragePages(){return Math.ceil(this.state.carsCount/this.state.carsPerPage)}setCarsCount(e){this.state.carsCount=e||0,this.broadcast("updateCarsCount",this.state.carsCount)}generateCars(){for(let e=0;e<100;e+=1){const e=`${this.brand[Math.floor(Math.random()*(this.brand.length-0))+0]} ${this.model[Math.floor(Math.random()*(this.model.length-0))+0]}`,t=`#${`0${Math.floor(256*Math.random()).toString(16)}`.slice(-2)}${`0${Math.floor(256*Math.random()).toString(16)}`.slice(-2)}${`0${Math.floor(256*Math.random()).toString(16)}`.slice(-2)}`;this.createCar(e,t)}}driveEngine(e){return this.engine.engine(e,"drive").then((e=>e.json())).then((t=>(this.broadcast("driveEngine",{id:e,data:t}),e))).catch((()=>this.broadcast("stopCarAnimation",e)))}startEngine(e){return this.engine.engine(e,"started").then((e=>e.json())).then((t=>(this.broadcast("startEngine",{id:e,engine:t}),new Promise(((n,r)=>{this.driveEngine(e).then((e=>{"number"==typeof e&&n({id:e,engine:t}),r()}))})))))}stopEngine(e){this.engine.engine(e,"stopped").then((e=>e.json())).then((t=>this.broadcast("stopEngine",{id:e,data:t})))}startRace(e){if(!this.state.carsCount)return;let t=performance.now();this.broadcast("raceStart",{});const n=e.map((e=>this.startEngine(e)));Promise.any(n).then((e=>{t=performance.now()-t,this.broadcast("raceEnd",Object.assign(e,{time:t}))}))}setWinnersCount(e){this.state.winnersCount=e||0,this.broadcast("updateWinnersCount",this.state.winnersCount)}getWinnersByPage(e=1,t=this.state.sort,n=this.state.sortOrder){return this.winners.getWinners(e,this.state.winnersPerPage,t,n).then((e=>{const t=Number(e.headers.get("x-total-count"));return this.setWinnersCount(t),e.json()})).then((e=>Promise.all(e.map(((e,t)=>this.getCarById(e.id).then((n=>Object.assign(e,n,{index:t}))))))))}getWinnersPagination(){const e={prev:!0,next:!0};return 1!==this.state.winnersPage&&(e.prev=!1),this.state.winnersPage<this.getWinnersPages()&&(e.next=!1),e}setWinnersPage(e=1,t=this.state.sort,n=this.state.sortOrder){e<1||0!==this.state.winnersPage&&e>this.getWinnersPages()||(this.state.winnersPage=e,this.broadcast("updateWinnersPage",this.state.winnersPage),this.getWinnersByPage(e,t,n).then((t=>this.broadcast("loadWinnersPage",{winners:t,page:e}))).then((()=>this.broadcast("updateWinnersPagination",this.getWinnersPagination()))))}getWinnersPages(){return Math.ceil(this.state.winnersCount/this.state.winnersPerPage)}addWinner(e,t){this.winners.getWinner(e).then((e=>{if(e.ok)return e.json();throw new Error("id не найден")})).then((n=>{const r=n.time<t?n.time:t;return this.winners.updateWinner(e,n.wins+1,r)})).catch((()=>this.winners.createWinner(e,1,t))).then((()=>this.broadcast("updateWinners",{})))}deleteWinner(e){this.winners.deleteWinner(e).then((e=>e.json())).then((()=>this.broadcast("removeWinner",e)))}}},645:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(160);t.default=class{constructor(){this.host=r.HOST}engine(e,t){return fetch(`${this.host}engine?id=${e}&status=${t}`,{method:"PATCH",headers:{"Content-Type":"application/json;charset=utf-8"}})}}},239:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(160);t.default=class{constructor(){this.host=r.HOST}getCars(e,t=7){return fetch(`${this.host}garage?_page=${e}&_limit=${t}`)}getCar(e){return fetch(`${this.host}garage/${e}`)}createCar(e,t){return fetch(`${this.host}garage`,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({name:e,color:t})})}deleteCar(e){return fetch(`${this.host}garage/${e}`,{method:"DELETE"})}updateCar(e,t,n){return fetch(`${this.host}garage/${e}`,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({name:t,color:n})})}}},173:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(160);t.default=class{constructor(){this.host=r.HOST}getWinners(e,t,n="time",r="ASC"){return fetch(`${this.host}winners?_page=${e}&_limit=${t}&_sort=${n}&_order=${r}`)}getWinner(e){return fetch(`${this.host}winners/${e}`)}createWinner(e,t,n){return fetch(`${this.host}winners`,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({id:e,wins:t,time:n})})}updateWinner(e,t,n){return fetch(`${this.host}winners/${e}`,{method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({wins:t,time:n})})}deleteWinner(e){return fetch(`${this.host}winners/${e}`,{method:"DELETE"})}}},421:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(718));t.default=class{constructor(e,t){this.model=e,this.view=t}init(){this.initGarageSubscribers(),this.initCarsSubscribers(),this.initWinnersSubscribers(),this.initGarageEvents(),this.initWinnersEvents(),this.model.setGaragePage(1),this.model.setWinnersPage(1),this.openGarage()}initGarageSubscribers(){this.model.subscribe("loadGaragePage",(e=>{this.view.renderCars(e)})),this.model.subscribe("updateGaragePagination",(e=>{this.view.pagePrevBtn.disabled=e.prev,this.view.pageNextBtn.disabled=e.next})),this.model.subscribe("updateCarsCount",(e=>{this.view.updateCount(e),this.view.raceBtn.disabled=e<1})),this.model.subscribe("updateGaragePage",(e=>{this.view.updateGaragePage(e)}))}initCarsSubscribers(){this.model.subscribe("createCar",(e=>{this.view.renderCar(e)})),this.model.subscribe("updateCar",(e=>{this.view.updateCar(e)})),this.model.subscribe("removeCar",(e=>{this.view.removeCar(e),this.model.deleteWinner(e)})),this.model.subscribe("startEngine",(e=>{this.view.startCar(e.id,e.engine)})),this.model.subscribe("stopCarAnimation",(e=>{this.view.stopCar(e)})),this.model.subscribe("stopEngine",(e=>{this.view.resetCar(e.id)})),this.model.subscribe("raceStart",(()=>{this.view.raceBtn.disabled=!0,this.view.resetBtn.disabled=!0})),this.model.subscribe("raceEnd",(e=>{this.model.getCarById(e.id).then((t=>{this.view.showWin(t.name,e.time),this.model.addWinner(t.id,e.time),this.view.resetBtn.disabled=!1}))}))}initWinnersSubscribers(){this.model.subscribe("loadWinnersPage",(e=>{this.view.renderWinners(e)})),this.model.subscribe("updateWinnersPagination",(e=>{const t=this.view.winnersPaginations.querySelector(".page-prev-btn"),n=this.view.winnersPaginations.querySelector(".page-next-btn");t.disabled=e.prev,n.disabled=e.next})),this.model.subscribe("removeWinner",(()=>{this.model.setWinnersPage(this.model.state.winnersPage)})),this.model.subscribe("updateWinnersCount",(e=>{this.view.updateWinnersCount(e)})),this.model.subscribe("updateWinnersPage",(e=>{this.view.updateWinnersPage(e)})),this.model.subscribe("updateWinners",(()=>{this.model.state.winnersPage=0,this.model.setWinnersPage(this.model.state.winnersPage||1)}))}initGarageEvents(){this.view.garageBtn.addEventListener("click",(()=>{this.openGarage()})),this.view.winnersBtn.addEventListener("click",(()=>{this.openWinners()})),this.view.createCarBtn.addEventListener("click",(()=>{const e=this.view.newCarNameInput.value,t=this.view.newCarColorInput.value;this.model.createCar(e,t),this.view.newCarNameInput.value="",this.view.newCarColorInput.value="#000000"})),this.view.updateCarBtn.addEventListener("click",(()=>{const e=this.view.editCarNameInput.value,t=this.view.editCarColorInput.value;this.model.updateCar(this.model.state.selectedCar,e,t)})),this.view.generateBtn.addEventListener("click",(()=>{this.model.generateCars()})),this.view.cars.addEventListener("click",(e=>{const t=e.target,n=a.default.getCarId(t);n&&(t.classList.contains("car__remove")&&this.model.deleteCar(n),t.classList.contains("car__select")&&(this.model.state.selectedCar=n,this.view.selectForUpdate(n)),t.classList.contains("car__start")&&this.model.startEngine(n).catch((()=>new Error("error: engine was broken down"))),t.classList.contains("car__stop")&&this.model.stopEngine(n))})),this.view.pagePrevBtn.addEventListener("click",(()=>{this.model.setGaragePage(this.model.state.garagePage-1)})),this.view.pageNextBtn.addEventListener("click",(()=>{this.model.setGaragePage(this.model.state.garagePage+1)})),this.view.raceBtn.addEventListener("click",(()=>{const e=this.view.getCarsId();this.model.startRace(e)})),this.view.resetBtn.addEventListener("click",(()=>{this.view.hideWin(),this.view.getCarsId().forEach((e=>this.model.stopEngine(e))),this.view.raceBtn.disabled=!1}))}initWinnersEvents(){this.view.winnersPaginations.addEventListener("click",(e=>{const t=e.target;t.classList.contains("page-prev-btn")&&this.model.setWinnersPage(this.model.state.winnersPage-1),t.classList.contains("page-next-btn")&&this.model.setWinnersPage(this.model.state.winnersPage+1)})),this.view.winnersTable.addEventListener("click",(e=>{const t=e.target.closest("th");if(!t)return;const n="ASC"===this.model.state.sortOrder?"DESC":"ASC";let r=null;if(t.classList.contains("th-wins")&&(r="wins"),t.classList.contains("th-best-time")&&(r="time"),r){this.view.winnersTable.querySelectorAll(".order-symbol").forEach((e=>{var t;return null===(t=e.firstChild)||void 0===t?void 0:t.remove()})),this.model.state.sort=r,this.model.state.sortOrder=n;const e=t.querySelector(".order-symbol");e&&(e.innerHTML="ASC"===n?"↓":"↑"),this.model.setWinnersPage(this.model.state.winnersPage,r,n)}}))}openGarage(){a.default.showEl(this.view.garage),a.default.hideEl(this.view.winners),this.view.garageBtn.disabled=!0,this.view.winnersBtn.disabled=!1}openWinners(){a.default.showEl(this.view.winners),a.default.hideEl(this.view.garage),this.view.garageBtn.disabled=!1,this.view.winnersBtn.disabled=!0}}},718:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(){n.renderApp(),this.garageBtn=document.querySelector(".garage-btn"),this.winnersBtn=document.querySelector(".winners-btn"),this.garage=document.querySelector(".garage"),this.winners=document.querySelector(".winners"),this.cars=document.querySelector(".cars"),this.createCarBtn=document.querySelector(".create-car-btn"),this.newCarNameInput=document.querySelector(".new-car-name"),this.newCarColorInput=document.querySelector(".new-car-color"),this.updateCarBtn=document.querySelector(".update-car-btn"),this.editCarNameInput=document.querySelector(".edit-car-name"),this.editCarColorInput=document.querySelector(".edit-car-color"),this.raceBtn=document.querySelector(".race"),this.resetBtn=document.querySelector(".reset"),this.generateBtn=document.querySelector(".generate"),this.carsCount=document.querySelector(".cars-count"),this.garagePageNumber=document.querySelector(".page-number"),this.pagePrevBtn=document.querySelector(".page-prev-btn"),this.pageNextBtn=document.querySelector(".page-next-btn"),this.winCarMessage=document.querySelector(".win-message"),this.winnersTable=document.querySelector(".winners-table"),this.winnersTbody=document.querySelector(".winners-tbody"),this.winnersPaginations=document.querySelector(".pagination-winners"),this.winnersPageNumber=document.querySelector(".page-winners-number"),this.winnersCount=document.querySelector(".winners-count")}static renderApp(){document.body.innerHTML='\n    <div class="view-btns"><button class="garage-btn">Garage<button class="winners-btn">Winners</div>\n    <div class="garage">\n\n      <div class="create-car">\n        <input type="text" class="new-car-name"><input type="color" class="new-car-color"><button class="create-car-btn">Create</button>\n      </div>\n      <div class="update-car">\n        <input type="text" class="edit-car-name" disabled><input type="color" class="edit-car-color" disabled><button class="update-car-btn" disabled>Update</button>\n      </div>\n      <div class="controls">\n        <button class="race">RACE</button>\n        <button class="reset">RESET</button>\n        <button class="generate">GENERATE</button>\n      </div>\n\n      <h2>GARAGE (<span class="cars-count">0</span>)</h2>\n      <div class="page">Page #<span class="page-number">0</span></div>\n      <div class="cars">\n      </div>\n      <div class="pagination">\n        <button class="page-prev-btn">prev</button>\n        <button class="page-next-btn" disabled>next</button>\n      </div>\n      <div class="win-message hide"></div>\n    </div>\n    <div class="winners hide">\n      <h2>Winners (<span class="winners-count">0</span>)</h2>\n      <div class="page-winners">Page #<span class="page-winners-number">0</span></div>\n      <table class="winners-table">\n        <thead>\n          <tr>\n            <th>Number</th>\n            <th>Car</th>\n            <th>Name</th>\n            <th class="th-wins">Wins<span class="order-symbol"></span></th>\n            <th class="th-best-time">Best time (seconds)<span class="order-symbol">↓</span</th>\n          </tr>\n        </thead>\n        <tbody class="winners-tbody"></tbody>\n      </table>\n      <div class="pagination-winners">\n        <button class="page-prev-btn">prev</button>\n        <button class="page-next-btn disabled">next</button>\n      </div>\n    </div>\n    '}renderCars(e){this.cars.innerHTML="",e.forEach((e=>{this.renderCar(e)}))}renderWinners({winners:e,page:t}){const n=10*(t-1);for(;this.winnersTbody.firstChild;)this.winnersTbody.removeChild(this.winnersTbody.firstChild);e.forEach(((e,t)=>{this.renderWinner(e,n+t+1)}))}renderCar(e){this.cars.insertAdjacentHTML("beforeend",`<div class="cars__item" data-id="${e.id}" data-color="${e.color}" data-name="${e.name}">\n        <div class="cars__row">\n        <button class="car__select">select</button><button class="car__remove">remove</button><div class="car__title">${e.name}</div>\n        </div>\n        <div class="cars__row cars__track">\n          <button class="car__start">A</button><button class="car__stop" disabled>B</button>\n          <div class="car__path">\n            <div class="car" style="background-color: ${e.color}"></div>\n            <div class="flag"></div>\n          </div>\n        </div>\n      </div>`)}renderWinner(e,t){const n=(e.time/1e3).toFixed(2);this.winnersTbody.insertAdjacentHTML("beforeend",`\n    <tr>\n      <td>${t}</td>\n      <td class="td__car"><div class="car winner" style="background-color: ${e.color}"></div></td>\n      <td>${e.name}</td>\n      <td>${e.wins}</td>\n      <td>${n}</td>\n    </tr>\n    `)}removeCar(e){var t;null===(t=this.cars.querySelector(`[data-id="${e}"]`))||void 0===t||t.remove()}enableUpdateCarInputs(){this.editCarColorInput.disabled=!1,this.editCarNameInput.disabled=!1,this.updateCarBtn.disabled=!1}disableUpdateCarInputs(){this.editCarColorInput.value="#000000",this.editCarNameInput.value="",this.editCarColorInput.disabled=!0,this.editCarNameInput.disabled=!0,this.updateCarBtn.disabled=!0}selectForUpdate(e){const t=this.cars.querySelector(`[data-id="${e}"]`);t&&(this.editCarColorInput.value=t.dataset.color||"",this.editCarNameInput.value=t.dataset.name||"",this.enableUpdateCarInputs())}updateCar(e){const t=this.cars.querySelector(`[data-id="${e.id}"]`);if(t){t.dataset.color=e.color,t.dataset.name=e.name;const n=t.querySelector(".car");n&&(n.style.backgroundColor=e.color);const r=t.querySelector(".car__title");r&&(r.innerText=e.name)}this.enableUpdateCarInputs()}updateCount(e){this.carsCount.innerText=String(e)}updateWinnersCount(e){this.winnersCount.innerText=String(e)}updateGaragePage(e){this.garagePageNumber.innerText=String(e)}updateWinnersPage(e){this.winnersPageNumber.innerText=String(e)}startCar(e,{velocity:t,distance:n}){let r=null;const a=this.cars.querySelector(`[data-id="${e}"]`);a.dataset.engine="started";const s=a.querySelector(".car"),i=a.querySelector(".car__path").offsetWidth-s.offsetWidth;this.setEngineStatus(e,"start");return window.requestAnimationFrame((function e(o){if("stopped"===a.dataset.engine)return;r||(r=o);const d=i/(n/t)*(o-r);s&&(s.style.transform=`translateX(${d>i?i:d}px)`),d<i&&"stopped"!==a.dataset.engine&&window.requestAnimationFrame(e)}))}stopCar(e){this.cars.querySelector(`[data-id="${e}"]`).dataset.engine="stopped"}setEngineStatus(e,t){const n=this.cars.querySelector(`[data-id="${e}"]`);if(n){const e=n.querySelector(".car__start"),r=n.querySelector(".car__stop");"start"===t?(e.disabled=!0,r.disabled=!1):(e.disabled=!1,r.disabled=!0)}}resetCar(e){const t=this.cars.querySelector(`[data-id="${e}"] .car`);this.stopCar(e),t.style.transform="translateX(0px)",this.setEngineStatus(e,"stop")}getCarsId(){return Array.prototype.map.call(this.cars.querySelectorAll(".cars__item"),(e=>+e.dataset.id))}showWin(e,t){const r=(t/1e3).toFixed(2);this.winCarMessage.innerText=`${e} went first [${r}s]!`,n.showEl(this.winCarMessage)}hideWin(){this.winCarMessage.innerText="",n.hideEl(this.winCarMessage)}static getCarId(e){const t=e.closest(".cars__item");return t?Number(t.dataset.id):0}static showEl(e){e.classList.remove("hide"),e.classList.add("show")}static hideEl(e){e.classList.remove("show"),e.classList.add("hide")}}t.default=n},303:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(153),(new(r(n(477)).default)).start()},244:(e,t,n)=>{e.exports=n.p+"df69e487f3b927065f94.svg"},186:(e,t,n)=>{e.exports=n.p+"f76d748a77c1777ed569.svg"}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={id:r,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,n(303)})();